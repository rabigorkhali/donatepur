name: Laravel CI/CD

on:
  push:
    branches:
      - live  # Change this to your project's main branch

jobs:
  build:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        node-version: [16.x]

    steps:
      - name: Checkout code
        uses: actions/checkout@v2

      - name: Pull Latest Changes
        run: git pull origin live
        
      # - name: Run Tests
      #   run: vendor/bin/phpunit

  deploy:
    runs-on: ubuntu-latest
    needs: build
    steps:
      - name: Deploy to Production
        run: |
            # Set up the SSH key for authentication
            # echo "GITHUB_REPOSITORY_value_echo: $SSH_PRIVATE_KEY"
            # echo $SSH_PRIVATE_KEY
            # echo "$SSH_PRIVATE_KEY" > deploy_key
            # chmod 600 deploy_key
            ssh -i b3BlbnNzaC1rZXktdjEAAAAACmFlczI1Ni1jdHIAAAAGYmNyeXB0AAAAGAAAABClEBa+zUdS1nur9Pm+MIvHAAAAEAAAAAEAAAEXAAAAB3NzaC1yc2EAAAADAQABAAABAQDkawA56ZQLLO+bZakA/a62fm3KtlT1sXKrz0HEh6Ukdvt6X9MIbyxYifIJi7XAkCCsnKVTLcKOTQvCeF6gKy7c4dRTeo/mYkxFsezkPyk6V5mse5UQHcIf1Ue1lgigJqGq69eFPphKhzuns56Q6lk6l84fnartrqFnnNhWv6w6/Rf+ttQGruX2jxrPBJnxpPznVi+9LmWOY698rnnLw3OrTYQLJSMyuUzK6dyz4B4AKZ9hhPTCRZOuSLT3M5P/fUhaOoK1zqo+XBy6m6j+XzIdqLktPSmS/ualuccU6D5NDuScB5i70PLry6KZNP2q6uFyEY3ECpoN31XfUliP3VuJAAADwJxgKy6SlCeg4zfeTngtSWli1eJba6tV1dfHfBne0zj9DbrvU7Zb6GzVryJCE9rExE7xQkHlFff8ArG25spGnfZxO7P1e9BBHaskMSPblgrU+DHr3tKe5r/Z/RJUT4fG1ZBT9b1YycLN0QChQROdZSi/YXqEfrxt5GJMmMfmcU98UXJDObFOnYNFwT8VpjZTapQB65ercYrYuweOwt0zVQFbuSZx0zMRfZCmb404AWUz/Fhh9ghVtwqJVWMdsGYUMLMsesrpCfeoEHZW7ykUhQ23yhtU/QW0fmlXAJfjzwsrTyGot9k8j0yz1+kHcU0oYpvNR49qR786Muvlq5dVC4LKSra65SEjZhrrUI9VqVZrT6ZfIDC/XHOyfR0Wn4VApAP+3xuXvXkq7/RnvbmTAygljaWeyQHIhaOH3vWOrj0Sn29CgQYb1FomoGDUNNl1sHr/rTWrowOlcBl3diuyouOlUjM/jxlWek/yL57SFGwqDoiLjFhl8yVRzRJjHEAknyIONHdSKuVZuw+Oau05kjkgYOJoS/WDbOCwcZn931YCemePNeMaH/CqQ2wXpz4g8Qu7Wl8qJnLpcfiEZVW3VE2jAO8Lpf0fKbQ85yqj7sa6ebc588XXxUGctAO5KFnMShmuPb9A6JnrYHvjbg3gfB/Mj0Ud2mnia+vJuASWzfH5mlODPqkJxh+GTii+qv9s7Sl21jN9SRvCUcOqrgZrgoYQ96Qg0PnJ/rXzbum16kjaTUNmk7RUEiBFl3tE3Em33zKNCasfK0fHyNj80JsaKBt0KzsYWQn5ienqVZhVQV7xst1RdcBY7y3M0QF36a8qKD+9hkGxmR44aZXlu5HEYHZpWPfJbhhe8FCuW3DTu1mv/EsOep6/JoPKE35p3JbzVKt8vMFYcrLgw2yB98Ddx8rcHT/FJV8GXINl0+sD7W1oQ+3YukzPmFCG8T3jz8EcrbQIu+tGsehIRY8oBSMC0ZQbErU06B8HfPaOkDrNYEwG+cylkvc6k47uNEPz4BCsrsVctdFiEyXALJqeYQX4IkZmciwyU7l4YeJbteJW+8C/yo8O7fdGz6ze/Qkfsjvx2ZIuTbokaEolgN7EO00Nn9iMBU/wQrXsJ03Zm6/zF/hQcD1culoNgPD7DOhK/kX7h1b+UUnArQ9k1DpJ1mStuXVerexRJjNF0nUI1SnaBT6+kISnvpBwV8VvzgEn25/Sswr7oUNGJAYbKbTiezodLv6iMJruUKyANEuNM8dI4VbzVl+kbsKO48SnkmlGWltV6g== donatepu@141.95.99.203 'cd /home/donatepu/public_html && git pull origin live'
            echo "Deployment to production completed successfully"
        # env:
        #     SSH_PRIVATE_KEY: ${{ secrets.SSH_PRIVATE_KEY }}

    # deploy:
    #   runs-on: ubuntu-latest
    #   needs: build
    #   steps:
    #     - name: Deploy to Production
    #       run: |
    #         # Set up the SSH key for authentication
    #         echo "$SSH_PRIVATE_KEY" > deploy_key
    #         chmod 600 deploy_key
    #         ssh -i deploy_key donatepu@141.95.99.203 'cd /home/donatepu/public_html && git pull origin live'
    #         echo "Deployment to production completed successfully"
    #       env:
    #         SSH_PRIVATE_KEY: ${{ secrets.SSH_PRIVATE_KEY }}

